# Factor Strategy ç³»çµ±ç”¢å“éœ€æ±‚æ–‡æª” (PRD)

**æ–‡æª”ç‰ˆæœ¬**: v1.3  
**å‰µå»ºæ—¥æœŸ**: 2025-01-22  
**è² è²¬äºº**: Factor Strategy System Team  
**ç­–ç•¥ç¯„ä¾‹**: cerebrum_core  
**æ›´æ–°æ—¥æœŸ**: 2025-01-22 (æ–°å¢æ™ºèƒ½æ—¥æœŸè™•ç†ç³»çµ± + è¨ˆç®—é©—è­‰ç³»çµ± + Z-Scoreæ¨™æº–åŒ–ç³»çµ± - å·²å®Œæˆ)

---

## ğŸ“‹ **ç”¢å“æ¦‚è¿°**

Factor Strategy ç³»çµ±æ˜¯ä¸€å€‹åŸºæ–¼æ­·å²æ•¸æ“šçš„é‡åŒ–ç­–ç•¥æ¡†æ¶ï¼Œå°ˆé–€ç”¨æ–¼è¨ˆç®—å’Œæ’ååŠ å¯†è²¨å¹£äº¤æ˜“å°çš„å› å­åˆ†æ•¸ã€‚ç³»çµ±é€šéå¤šç¨®æ•¸å­¸å› å­ç¶œåˆè©•ä¼°äº¤æ˜“å°çš„æŠ•è³‡åƒ¹å€¼ï¼Œä¸¦æ¡ç”¨Z-Scoreæ¨™æº–åŒ–è™•ç†ç¢ºä¿å„å› å­åœ¨ç›¸åŒé‡ç´šä¸Šå…¬å¹³ç«¶çˆ­ï¼Œç‚ºç”¨æˆ¶æä¾›å®¢è§€çš„æŠ•è³‡æ±ºç­–ä¾æ“šã€‚ç³»çµ±å…·å‚™æ™ºèƒ½æ—¥æœŸè™•ç†ã€è¨ˆç®—é©—è­‰åŠŸèƒ½å’Œå› å­æ¨™æº–åŒ–åŠŸèƒ½ï¼Œç¢ºä¿è¨ˆç®—éç¨‹çš„é€æ˜æ€§ã€å¯é©—è­‰æ€§å’Œç§‘å­¸æ€§ã€‚

## ğŸ¯ **æ ¸å¿ƒæ¥­å‹™æµç¨‹**

### **ç³»çµ±æ¶æ§‹æµç¨‹åœ–**
```
run_factor_strategies.py (åŸ·è¡Œå…¥å£)
         â†“
factor_strategy_config.py (è®€å–ç­–ç•¥é…ç½®)
         â†“
return_metricsè¡¨ (ç²å–æ­·å²æ•¸æ“š)
         â†“
factor_library.py (å› å­è¨ˆç®—å‡½å¼åº«)
         â†“
factor_engine.py (åŸ·è¡Œå› å­è¨ˆç®—)
         â†“
åŠ æ¬Šçµ„åˆè¨ˆç®— (æŒ‰æ¬Šé‡åˆä½µå› å­åˆ†æ•¸)
         â†“
strategy_rankingè¡¨ (ä¿å­˜æœ€çµ‚æ’å)
```

## ğŸ¤– **æ™ºèƒ½æ—¥æœŸè™•ç†ç³»çµ±**

### **ç³»çµ±ç‰¹è‰²ï¼šåƒè€ƒ strategy_ranking.py çš„æ™ºèƒ½è¨­è¨ˆ**

Factor Strategy ç³»çµ±å…·å‚™å®Œæ•´çš„æ™ºèƒ½æ—¥æœŸåµæ¸¬å’Œè™•ç†èƒ½åŠ›ï¼Œæ”¯æ´å¤šç¨®åŸ·è¡Œæ¨¡å¼ï¼Œç¢ºä¿ç”¨æˆ¶èƒ½ä»¥æœ€ä¾¿æ·çš„æ–¹å¼ä½¿ç”¨ç³»çµ±ã€‚

### **æ”¯æ´çš„åŸ·è¡Œæ¨¡å¼**

#### **æ¨¡å¼1ï¼šå–®æ—¥è™•ç†**
```bash
python factor_strategies/run_factor_strategies.py --date 2025-01-31 --strategy cerebrum_core
```
**é©ç”¨å ´æ™¯**: åªéœ€è¦åˆ†æç‰¹å®šæ—¥æœŸçš„æ•¸æ“š

#### **æ¨¡å¼2ï¼šæ—¥æœŸç¯„åœè™•ç†**
```bash
python factor_strategies/run_factor_strategies.py --start_date 2025-01-01 --end_date 2025-01-31 --strategy cerebrum_core
```
**é©ç”¨å ´æ™¯**: éœ€è¦åˆ†æä¸€æ®µæ™‚é–“å…§çš„æ‰€æœ‰æ•¸æ“šï¼Œé€²è¡Œè¶¨å‹¢åˆ†æ

#### **æ¨¡å¼3ï¼šæ‰€æœ‰å¯ç”¨æ—¥æœŸè™•ç†**
```bash
python factor_strategies/run_factor_strategies.py --all --strategy cerebrum_core
```
**é©ç”¨å ´æ™¯**: æ˜ç¢ºæŒ‡å®šè¦è™•ç†æ•¸æ“šåº«ä¸­çš„æ‰€æœ‰å¯ç”¨æ—¥æœŸ

#### **æ¨¡å¼4ï¼šé è¨­æ™ºèƒ½æ¨¡å¼**
```bash
python factor_strategies/run_factor_strategies.py --strategy cerebrum_core
```
**é©ç”¨å ´æ™¯**: æœ€å¸¸ç”¨æ¨¡å¼ï¼Œç³»çµ±è‡ªå‹•è™•ç†æ‰€æœ‰å¯ç”¨æ—¥æœŸ

#### **æ¨¡å¼5ï¼šè‡ªå‹•åŒ–æ‰¹é‡æ¨¡å¼**
```bash
python factor_strategies/run_factor_strategies.py --auto
```
**é©ç”¨å ´æ™¯**: è™•ç†æ‰€æœ‰ç­–ç•¥çš„æ‰€æœ‰å¯ç”¨æ—¥æœŸï¼Œå®Œå…¨è‡ªå‹•åŒ–

### **æ™ºèƒ½æ—¥æœŸåµæ¸¬é‚è¼¯**

#### **ç¬¬0æ­¥ï¼šè‡ªå‹•åµæ¸¬å¯ç”¨æ•¸æ“š**
**åµæ¸¬éç¨‹**:
```
ç³»çµ±å•Ÿå‹•æ™‚è‡ªå‹•åŸ·è¡Œï¼š
1. é€£æ¥åˆ° return_metrics è¡¨
2. åŸ·è¡Œ SQLï¼šSELECT DISTINCT date FROM return_metrics ORDER BY date
3. ç²å–æ‰€æœ‰å¯ç”¨æ—¥æœŸåˆ—è¡¨
4. é¡¯ç¤ºæ—¥æœŸç¯„åœï¼šã€Œæ‰¾åˆ° 449 å€‹å¯ç”¨æ—¥æœŸï¼Œå¾ 2024-01-01 åˆ° 2025-06-24ã€
```

**æ™ºèƒ½æ±ºç­–**:
```
æ ¹æ“šç”¨æˆ¶åƒæ•¸è‡ªå‹•æ±ºå®šè™•ç†ç¯„åœï¼š
- å¦‚æœæŒ‡å®š --dateï¼šè™•ç†è©²å–®æ—¥
- å¦‚æœæŒ‡å®š --start_date å’Œ --end_dateï¼šè™•ç†æ—¥æœŸç¯„åœ
- å¦‚æœæŒ‡å®š --allï¼šè™•ç†æ‰€æœ‰å¯ç”¨æ—¥æœŸ
- å¦‚æœæ²’æœ‰æŒ‡å®šæ—¥æœŸåƒæ•¸ï¼šé è¨­è™•ç†æ‰€æœ‰å¯ç”¨æ—¥æœŸ
```

**è™•ç†é‚è¼¯**:
```
ç³»çµ±æ€è€ƒéç¨‹ï¼š
ã€Œç”¨æˆ¶æ²’æœ‰æŒ‡å®šæ—¥æœŸï¼Œæˆ‘è¦æ€éº¼è™•ç†ï¼Ÿã€
ã€Œåƒè€ƒ strategy_ranking.py çš„é‚è¼¯ï¼Œé è¨­è™•ç†æ‰€æœ‰å¯ç”¨æ—¥æœŸæœ€å¯¦ç”¨ã€
ã€Œé€™æ¨£ç”¨æˆ¶ä¸ç”¨æ‰‹å‹•æŒ‡å®šæ—¥æœŸï¼Œä¸€æ¬¡æ€§è™•ç†æ‰€æœ‰æ•¸æ“šã€
ã€Œç”Ÿæˆå®Œæ•´çš„æ­·å²æ’åæ•¸æ“šï¼Œæ–¹ä¾¿å¾ŒçºŒåˆ†æã€
```

### **æ‰¹é‡è™•ç†å„ªåŒ–**

#### **åˆ†æ‰¹åŸ·è¡Œæ©Ÿåˆ¶**
```
ç•¶è™•ç†å¤§é‡æ—¥æœŸæ™‚ï¼ˆå¦‚449å¤©ï¼‰ï¼š
1. é€æ—¥è™•ç†ï¼Œé¿å…è¨˜æ†¶é«”æº¢å‡º
2. æ¯æ—¥é¡¯ç¤ºè™•ç†é€²åº¦
3. å¤±æ•—çš„æ—¥æœŸæœƒè·³éï¼Œä¸å½±éŸ¿å…¶ä»–æ—¥æœŸ
4. æœ€çµ‚çµ±è¨ˆæˆåŠŸè™•ç†çš„æ—¥æœŸæ•¸é‡
```

#### **å¤§é‡è™•ç†æé†’**
```
ç•¶çµ„åˆæ•¸è¶…é50å€‹æ™‚ï¼š
ã€Œâš ï¸ å°‡è™•ç† 449 å€‹(æ—¥æœŸ,ç­–ç•¥)çµ„åˆï¼Œå¯èƒ½éœ€è¦è¼ƒé•·æ™‚é–“ã€‚æ˜¯å¦ç¹¼çºŒ? (y/n)ã€
ç¢ºä¿ç”¨æˆ¶äº†è§£è™•ç†æ™‚é–“æˆæœ¬
```

#### **çµæœé è¦½**
```
è™•ç†å®Œæˆå¾Œè‡ªå‹•é¡¯ç¤ºï¼š
ğŸ“Š æœ€æ–°çµæœé è¦½:
ç­–ç•¥: cerebrum_core, æ—¥æœŸ: 2025-06-24 (å‰5å)
--------------------------------------------------
æ’å   äº¤æ˜“å°             åˆ†æ•¸          
--------------------------------------------------
1    KAS_binance_bybit 12.312459   
2    AAVE_binance_bybit 11.243289   
3    USDC_binance_bybit 10.671373   
```

## ğŸ§  **è©³ç´°æ¥­å‹™æµç¨‹ - ä»¥ cerebrum_core ç­–ç•¥ç‚ºä¾‹**

### **ç¬¬1æ­¥ï¼šç³»çµ±å•Ÿå‹•**
**è§¸ç™¼æ¢ä»¶**: ç”¨æˆ¶åŸ·è¡ŒæŒ‡ä»¤
```
python factor_strategies/run_factor_strategies.py --strategy cerebrum_core
```

**æ™ºèƒ½æ—¥æœŸè™•ç†**:
- ç³»çµ±è‡ªå‹•åµæ¸¬åˆ°449å€‹å¯ç”¨æ—¥æœŸ
- é è¨­è™•ç†æ‰€æœ‰æ—¥æœŸï¼ˆ2024-01-01 åˆ° 2025-06-24ï¼‰
- ç”¨æˆ¶ç¢ºèªå¾Œé–‹å§‹æ‰¹é‡åŸ·è¡Œ

### **ç¬¬2æ­¥ï¼šç­–ç•¥é…ç½®è®€å–**
**ç³»çµ±è¡Œç‚º**: ç¨‹å¼è‡ªå‹•è®€å– `factor_strategy_config.py` ä¸­çš„ cerebrum_core é…ç½®

**é…ç½®å…§å®¹è§£æ**:
```
cerebrum_core ç­–ç•¥é…ç½®ï¼š
- æ•¸æ“šéœ€æ±‚ï¼š90å¤©æ­·å²è³‡æ–™ï¼ˆæœ€é•·å› å­çª—å£ï¼‰
- æ–°å¹£éæ¿¾ï¼šè·³éä¸Šå¸‚å‰3å¤©
- å› å­çµ„åˆï¼š4å€‹å› å­
- æ¬Šé‡åˆ†é…ï¼šè¶¨å‹¢10%ã€å¤æ™®40%ã€ç©©å®šæ€§30%ã€å‹ç‡20%
```

**æ¥­å‹™é‚è¼¯**:
```
ç¨‹å¼è®€åˆ°é…ç½®å¾Œæ€è€ƒï¼š
ã€Œå¥½ï¼Œæˆ‘éœ€è¦æº–å‚™ï¼š
1. 90å¤©çš„æ­·å²æ•¸æ“šï¼ˆå› ç‚ºè¶¨å‹¢å› å­éœ€è¦çœ‹90å¤©ï¼‰
2. è¦éæ¿¾æ‰å‰›ä¸Šå¸‚3å¤©å…§çš„æ–°å¹£
3. è¦è¨ˆç®—4å€‹ä¸åŒçš„å› å­åˆ†æ•¸
4. æœ€å¾ŒæŒ‰ç…§æŒ‡å®šæ¬Šé‡åˆä½µæˆæœ€çµ‚åˆ†æ•¸ã€
```

### **ç¬¬3æ­¥ï¼šæ•¸æ“šå……è¶³æ€§æª¢æŸ¥**
**æª¢æŸ¥é‚è¼¯**:
```
ç³»çµ±è¨ˆç®—ï¼šã€Œ90å¤©ï¼ˆæœ€å¤§çª—å£ï¼‰+ 3å¤©ï¼ˆæ–°å¹£éæ¿¾ï¼‰= 93å¤©ã€
æŸ¥è©¢è³‡æ–™åº«ï¼šã€Œreturn_metricsè¡¨å¾2024å¹´10æœˆæœ‰æ•¸æ“šåˆ°ç¾åœ¨ï¼Œå…±120å¤©ã€
çµæœåˆ¤æ–·ï¼šã€Œ120å¤© > 93å¤©ï¼Œæ•¸æ“šå……è¶³ï¼Œå¯ä»¥é–‹å§‹è¨ˆç®—ã€
```

**æª¢æŸ¥é€šé**: ç³»çµ±æç¤ºã€Œâœ… æ•¸æ“šå……è¶³ï¼Œé–‹å§‹åŸ·è¡Œè¨ˆç®—ã€

### **ç¬¬4æ­¥ï¼šåŸå§‹æ•¸æ“šç²å–**
**æ•¸æ“šä¾†æº**: return_metrics è¡¨
**ç²å–ç¯„åœ**: 2024å¹´10æœˆ30æ—¥ è‡³ 2025å¹´1æœˆ31æ—¥
**æ•¸æ“šå…§å®¹**: æ¯å€‹äº¤æ˜“å°çš„ return_1dï¼ˆæ¯æ—¥å›å ±ç‡ï¼‰

**ç²å–çµæœ**:
```
æˆåŠŸç²å–ï¼š
- æ™‚é–“ç¯„åœï¼š93å¤©
- äº¤æ˜“å°æ•¸é‡ï¼š13å€‹ï¼ˆBTCã€ETHã€ADAã€SOLã€USDCç­‰ï¼‰
- ç¸½è¨˜éŒ„æ•¸ï¼š93å¤© Ã— 13å€‹å¹£ç¨® = 1,209ç­†æ¯æ—¥å›å ±è¨˜éŒ„
```

### **ç¬¬5æ­¥ï¼šæ–°å¹£éæ¿¾**
**éæ¿¾è¦å‰‡**: è·³éä¸Šå¸‚å°‘æ–¼3å¤©çš„äº¤æ˜“å°

**éæ¿¾é‚è¼¯**:
```
ç³»çµ±æª¢æŸ¥æ¯å€‹äº¤æ˜“å°ï¼š
ã€ŒADAé¦–æ¬¡å‡ºç¾æ—¥æœŸï¼š2024å¹´10æœˆ15æ—¥ï¼Œå·²ä¸Šå¸‚107å¤© â†’ ä¿ç•™ã€
ã€ŒBTCé¦–æ¬¡å‡ºç¾æ—¥æœŸï¼š2024å¹´10æœˆ15æ—¥ï¼Œå·²ä¸Šå¸‚107å¤© â†’ ä¿ç•™ã€
ã€ŒETHé¦–æ¬¡å‡ºç¾æ—¥æœŸï¼š2024å¹´10æœˆ15æ—¥ï¼Œå·²ä¸Šå¸‚107å¤© â†’ ä¿ç•™ã€
...
```

**éæ¿¾çµæœ**: 13å€‹äº¤æ˜“å°å…¨éƒ¨ä¿ç•™ï¼ˆå‡ç‚ºæˆç†Ÿäº¤æ˜“å°ï¼‰

### **ç¬¬6æ­¥ï¼šå› å­è¨ˆç®— - 4å€‹å› å­ä¸¦è¡Œè¨ˆç®—**

#### **å› å­1ï¼šè¶¨å‹¢åˆ†æ•¸ (F_trend) - æ¬Šé‡10%**
**è¨ˆç®—ç®—å¼**: factor_library.py â†’ calculate_trend_slope
**æ•¸æ“šçª—å£**: æœ€è¿‘90å¤©çš„ return_1d
**è¨ˆç®—é‚è¼¯**:
```
å°æ¯å€‹äº¤æ˜“å°ï¼š
1. å–æœ€è¿‘90å¤©çš„æ¯æ—¥å›å ±ç‡
2. è¨ˆç®—ç´¯ç©å›å ±ï¼ˆæŠŠ90å¤©çš„å›å ±åŠ èµ·ä¾†ï¼‰
3. ç”¨ç·šæ€§å›æ­¸ç•«ä¸€æ¢è¶¨å‹¢ç·š
4. è¨ˆç®—è¶¨å‹¢ç·šçš„æ–œç‡
5. æ–œç‡ç‚ºæ­£ = ä¸Šå‡è¶¨å‹¢ï¼ˆå¥½ï¼‰ï¼Œæ–œç‡ç‚ºè²  = ä¸‹é™è¶¨å‹¢ï¼ˆä¸å¥½ï¼‰
```

**è¨ˆç®—çµæœç¯„ä¾‹**:
- BTC: +0.00234ï¼ˆè¼•å¾®ä¸Šå‡è¶¨å‹¢ï¼‰
- ETH: +0.00187ï¼ˆè¼•å¾®ä¸Šå‡è¶¨å‹¢ï¼‰  
- ADA: +0.00301ï¼ˆè¼ƒæ˜é¡¯ä¸Šå‡è¶¨å‹¢ï¼‰

#### **å› å­2ï¼šé¢¨éšªèª¿æ•´æ”¶ç›Šåˆ†æ•¸ (F_sharpe) - æ¬Šé‡40%**
**è¨ˆç®—ç®—å¼**: factor_library.py â†’ calculate_sharpe_ratio
**æ•¸æ“šçª—å£**: æœ€è¿‘60å¤©çš„ return_1d
**è¨ˆç®—é‚è¼¯**:
```
å°æ¯å€‹äº¤æ˜“å°ï¼š
1. è¨ˆç®—60å¤©çš„å¹³å‡æ¯æ—¥å›å ±ç‡
2. è¨ˆç®—60å¤©å›å ±ç‡çš„æ¨™æº–å·®ï¼ˆæ³¢å‹•ç¨‹åº¦ï¼‰
3. ç”¨ã€Œå¹³å‡å›å ± Ã· æ¨™æº–å·®ã€å¾—åˆ°å¤æ™®æ¯”ç‡
4. ä¹˜ä»¥âˆš365 è½‰æ›ç‚ºå¹´åŒ–å¤æ™®æ¯”ç‡
5. æ„ç¾©ï¼šåŒæ¨£çš„å›å ±ä¸‹ï¼Œæ³¢å‹•è¶Šå°è¶Šå¥½
```

**è¨ˆç®—çµæœç¯„ä¾‹**:
- BTC: 2.34ï¼ˆé¢¨éšªèª¿æ•´å¾Œæ”¶ç›Šä¸éŒ¯ï¼‰
- ETH: 1.87ï¼ˆé¢¨éšªèª¿æ•´å¾Œæ”¶ç›Šä¸€èˆ¬ï¼‰
- ADA: 3.21ï¼ˆé¢¨éšªèª¿æ•´å¾Œæ”¶ç›Šå¾ˆå¥½ï¼‰

#### **å› å­3ï¼šç©©å®šæ€§åˆ†æ•¸ (F_stability) - æ¬Šé‡30%**
**è¨ˆç®—ç®—å¼**: factor_library.py â†’ calculate_inv_std_dev  
**æ•¸æ“šçª—å£**: æœ€è¿‘60å¤©çš„ return_1d
**è¨ˆç®—é‚è¼¯**:
```
å°æ¯å€‹äº¤æ˜“å°ï¼š
1. è¨ˆç®—60å¤©çš„å¹³å‡å›å ±ç‡
2. å¦‚æœå¹³å‡å›å ±ç‚ºè² ï¼Œç©©å®šæ€§åˆ†æ•¸ = 0ï¼ˆè™§éŒ¢å†ç©©å®šä¹Ÿæ²’ç”¨ï¼‰
3. å¦‚æœå¹³å‡å›å ±ç‚ºæ­£ï¼Œè¨ˆç®—æ¨™æº–å·®
4. ç”¨ã€Œ1 Ã· æ¨™æº–å·®ã€å¾—åˆ°ç©©å®šæ€§åˆ†æ•¸
5. æ¨™æº–å·®è¶Šå°ï¼ˆæ³¢å‹•è¶Šå°ï¼‰ï¼Œç©©å®šæ€§åˆ†æ•¸è¶Šé«˜
```

**è¨ˆç®—çµæœç¯„ä¾‹**:
- BTC: 125.6ï¼ˆç©©å®šæ€§ä¸­ç­‰ï¼‰
- ETH: 98.3ï¼ˆç©©å®šæ€§è¼ƒä½ï¼‰
- ADA: 187.4ï¼ˆç©©å®šæ€§å¾ˆé«˜ï¼‰

#### **å› å­4ï¼šå‹ç‡åˆ†æ•¸ (F_winrate) - æ¬Šé‡20%**
**è¨ˆç®—ç®—å¼**: factor_library.py â†’ calculate_win_rate
**æ•¸æ“šçª—å£**: æœ€è¿‘60å¤©çš„ return_1d
**è¨ˆç®—é‚è¼¯**:
```
å°æ¯å€‹äº¤æ˜“å°ï¼š
1. çµ±è¨ˆ60å¤©ä¸­æœ‰å¤šå°‘å¤©æ˜¯æ­£å›å ±ï¼ˆè³ºéŒ¢ï¼‰
2. è¨ˆç®—ã€Œè³ºéŒ¢å¤©æ•¸ Ã· ç¸½å¤©æ•¸ã€å¾—åˆ°å‹ç‡
3. å‹ç‡è¶Šé«˜ï¼Œè¡¨ç¤ºè³ºéŒ¢æ©Ÿæœƒè¶Šå¤§
```

**è¨ˆç®—çµæœç¯„ä¾‹**:
- BTC: 0.65ï¼ˆ60å¤©ä¸­39å¤©è³ºéŒ¢ï¼Œå‹ç‡65%ï¼‰
- ETH: 0.58ï¼ˆ60å¤©ä¸­35å¤©è³ºéŒ¢ï¼Œå‹ç‡58%ï¼‰
- ADA: 0.70ï¼ˆ60å¤©ä¸­42å¤©è³ºéŒ¢ï¼Œå‹ç‡70%ï¼‰

### **ç¬¬7æ­¥ï¼šåŠ æ¬Šçµ„åˆè¨ˆç®—**
**æ¬Šé‡è¨­å®š**: è¶¨å‹¢10% + å¤æ™®40% + ç©©å®šæ€§30% + å‹ç‡20% = 100%

**è¨ˆç®—å…¬å¼**:
```
æœ€çµ‚åˆ†æ•¸ = F_trend Ã— 0.10 + F_sharpe Ã— 0.40 + F_stability Ã— 0.30 + F_winrate Ã— 0.20
```

**è¨ˆç®—éç¨‹ç¯„ä¾‹**:

**ADA äº¤æ˜“å°**:
```
æœ€çµ‚åˆ†æ•¸ = 0.00301 Ã— 0.10 + 3.21 Ã— 0.40 + 187.4 Ã— 0.30 + 0.70 Ã— 0.20
         = 0.0003 + 1.284 + 56.22 + 0.14
         = 57.644
```

**BTC äº¤æ˜“å°**:
```
æœ€çµ‚åˆ†æ•¸ = 0.00234 Ã— 0.10 + 2.34 Ã— 0.40 + 125.6 Ã— 0.30 + 0.65 Ã— 0.20
         = 0.0002 + 0.936 + 37.68 + 0.13
         = 38.746
```

### **ç¬¬8æ­¥ï¼šæ’åç”Ÿæˆ**
**æ’åºè¦å‰‡**: æŒ‰æœ€çµ‚åˆ†æ•¸å¾é«˜åˆ°ä½æ’åº

**æ’åçµæœ**:
```
cerebrum_core ç­–ç•¥æ’åï¼ˆ2025-01-31ï¼‰ï¼š
1. ADA_binance_bybitï¼š57.644åˆ† - ğŸ¥‡ æœ€æ¨è–¦
2. ETH_binance_bybitï¼š45.123åˆ† - ğŸ¥ˆ æ¬¡æ¨è–¦  
3. BTC_binance_bybitï¼š38.746åˆ† - ğŸ¥‰ ç¬¬ä¸‰æ¨è–¦
4. USDC_binance_bybitï¼š32.891åˆ† - ç¬¬å››å
5. BCH_binance_bybitï¼š28.567åˆ† - ç¬¬äº”å
...
13. XXX_binance_bybitï¼š-12.345åˆ† - æœ€ä¸æ¨è–¦
```

### **ç¬¬9æ­¥ï¼šçµæœä¿å­˜**
**ä¿å­˜ä½ç½®**: strategy_ranking è¡¨
**ä¿å­˜å…§å®¹**: 
- strategy_name: 'cerebrum_core'
- trading_pair: äº¤æ˜“å°åç¨±
- date: '2025-01-31'
- final_ranking_score: æœ€çµ‚ç¶œåˆåˆ†æ•¸
- rank_position: æ’åä½ç½®
- component_scores: 4å€‹å› å­çš„è©³ç´°åˆ†æ•¸ï¼ˆJSONæ ¼å¼ï¼‰
- **calculation: è©³ç´°è¨ˆç®—éç¨‹ï¼ˆäººé¡å¯è®€æ ¼å¼ï¼‰**

**ä¿å­˜çµæœ**: 13ç­†è¨˜éŒ„æˆåŠŸä¿å­˜åˆ°è³‡æ–™åº«

### **ğŸ” è¨ˆç®—é©—è­‰ç³»çµ± (Calculation Verification)**

#### **è¨ˆç®—è¨˜éŒ„æ¬„ä½è¨­è¨ˆ**
ç‚ºäº†ç¢ºä¿ç¨‹å¼è¨ˆç®—çš„æ­£ç¢ºæ€§ï¼Œä½¿ç”¨ `strategy_ranking` è¡¨ç¾æœ‰çš„ **`final_combination_value`** æ¬„ä½è¨˜éŒ„æ¯ç­†æ’åçš„å®Œæ•´è¨ˆç®—éç¨‹ï¼Œæ–¹ä¾¿æ‰‹å‹•é©—è­‰å’Œé™¤éŒ¯ã€‚

**å¯¦ç¾å„ªå‹¢**ï¼š
- âœ… **å‘ä¸‹ç›¸å®¹** - ç„¡éœ€ä¿®æ”¹æ•¸æ“šåº«çµæ§‹
- âœ… **åŠŸèƒ½å®Œæ•´** - å¯¦ç¾æ‰€æœ‰è¨ˆç®—é©—è­‰éœ€æ±‚
- âœ… **æ€§èƒ½å„ªåŒ–** - é‡ç”¨ç¾æœ‰æ¬„ä½ï¼Œæå‡æ•ˆç‡

#### **è¨ˆç®—è¨˜éŒ„æ ¼å¼ç¯„ä¾‹**
**ADA äº¤æ˜“å°çš„è¨ˆç®—è¨˜éŒ„**:
```
"F_trend: 0.00301 Ã— 0.10 = 0.0003 | F_sharpe: 3.21 Ã— 0.40 = 1.284 | F_stability: 187.4 Ã— 0.30 = 56.22 | F_winrate: 0.70 Ã— 0.20 = 0.14 | Final: 0.0003 + 1.284 + 56.22 + 0.14 = 57.644"
```

**BTC äº¤æ˜“å°çš„è¨ˆç®—è¨˜éŒ„**:
```
"F_trend: 0.00234 Ã— 0.10 = 0.0002 | F_sharpe: 2.34 Ã— 0.40 = 0.936 | F_stability: 125.6 Ã— 0.30 = 37.68 | F_winrate: 0.65 Ã— 0.20 = 0.13 | Final: 0.0002 + 0.936 + 37.68 + 0.13 = 38.746"
```

#### **è¨ˆç®—æ ¼å¼èªªæ˜**
```
æ ¼å¼ï¼š[å› å­å]: [åŸå§‹å€¼] Ã— [æ¬Šé‡] = [åŠ æ¬Šå€¼] | ... | Final: [åŠ æ¬Šå€¼ç›¸åŠ ] = [æœ€çµ‚åˆ†æ•¸]

ç¯„ä¾‹è§£æï¼š
- F_trend: 0.00301 Ã— 0.10 = 0.0003
  â†‘å› å­å   â†‘åŸå§‹åˆ†æ•¸ â†‘æ¬Šé‡  â†‘åŠ æ¬Šå¾Œåˆ†æ•¸
  
- Final: 0.0003 + 1.284 + 56.22 + 0.14 = 57.644
  â†‘æœ€çµ‚è¨ˆç®—ï¼šå››å€‹åŠ æ¬Šåˆ†æ•¸ç›¸åŠ  = æœ€çµ‚æ’ååˆ†æ•¸
```

#### **é©—è­‰ç”¨é€”**

**1. å› å­åŸå§‹å€¼é©—è­‰**
```
æ‰‹å‹•æª¢æŸ¥ï¼šF_trend = 0.00301 æ˜¯å¦æ­£ç¢º
- å– ADA æœ€è¿‘90å¤©çš„ return_1d æ•¸æ“š
- è¨ˆç®—ç´¯ç©å›å ±ä¸¦é€²è¡Œç·šæ€§å›æ­¸
- é©—è­‰æ–œç‡æ˜¯å¦ç‚º 0.00301
```

**2. æ¬Šé‡æ‡‰ç”¨é©—è­‰**
```
æ‰‹å‹•æª¢æŸ¥ï¼š3.21 Ã— 0.40 = 1.284 æ˜¯å¦è¨ˆç®—æ­£ç¢º
- ç¢ºèª cerebrum_core ç­–ç•¥çš„ F_sharpe æ¬Šé‡ç¢ºå¯¦æ˜¯ 0.40
- é©—è­‰ä¹˜æ³•è¨ˆç®—ç„¡èª¤
```

**3. æœ€çµ‚æ±‚å’Œé©—è­‰**
```
æ‰‹å‹•æª¢æŸ¥ï¼š0.0003 + 1.284 + 56.22 + 0.14 = 57.644
- é©—è­‰å››å€‹åŠ æ¬Šåˆ†æ•¸çš„åŠ æ³•è¨ˆç®—
- æª¢æŸ¥æ˜¯å¦æœ‰èˆå…¥èª¤å·®
```

**4. ç•°å¸¸æ’æŸ¥**
```
ç•¶ç™¼ç¾ç•°å¸¸çµæœæ™‚ï¼š
- å¿«é€Ÿå®šä½æ˜¯å“ªå€‹å› å­è²¢ç»ç•°å¸¸
- ä¾‹å¦‚ï¼šF_stability = 187.4 çœ‹èµ·ä¾†éé«˜ï¼Œéœ€è¦æª¢æŸ¥ç©©å®šæ€§è¨ˆç®—é‚è¼¯
- è¿½æº¯åˆ°å…·é«”çš„æ•¸æ“šæºå’Œè¨ˆç®—æ­¥é©Ÿ
```

#### **å¯¦ç¾æŠ€è¡“è¦æ ¼**
**è³‡æ–™åº«æ¶æ§‹èªªæ˜**:
```sql
-- ä½¿ç”¨ç¾æœ‰æ¬„ä½ï¼Œç„¡éœ€ä¿®æ”¹æ•¸æ“šåº«çµæ§‹
-- final_combination_value TEXT æ¬„ä½å·²å­˜åœ¨æ–¼ strategy_ranking è¡¨ä¸­
SELECT final_combination_value FROM strategy_ranking WHERE strategy_name = 'cerebrum_core';
```

**ç¨‹å¼ç¢¼ä¿®æ”¹ä½ç½®**:
- factor_engine.py: åœ¨ `_calculate_final_score()` å‡½æ•¸ç”Ÿæˆè¨ˆç®—è¨˜éŒ„
- database_operations.py: ç¢ºä¿ `final_combination_value` æ¬„ä½æ­£ç¢ºä¿å­˜
- run_factor_strategies.py: è¨ˆç®—è¨˜éŒ„å·²è‡ªå‹•åŒ…å«åœ¨çµæœä¸­

**è¨ˆç®—è¨˜éŒ„ç”Ÿæˆç¯„ä¾‹**:
```python
# åœ¨ factor_engine.py ä¸­
calculation_parts = []
for factor_name, factor_config in strategy_config['factors'].items():
    raw_value = factor_scores[factor_name]
    weight = strategy_config['weights'][factor_name]
    weighted_value = raw_value * weight
    calculation_parts.append(f"{factor_name}: {raw_value:.5f} Ã— {weight:.2f} = {weighted_value:.4f}")

calculation_formula = " | ".join(calculation_parts)
final_sum = " + ".join([f"{factor_scores[name] * strategy_config['weights'][name]:.4f}" 
                        for name in strategy_config['factors'].keys()])
calculation_record = f"{calculation_formula} | Final: {final_sum} = {final_score:.6f}"
```

## ğŸ“Š **Z-Scoreæ¨™æº–åŒ–ç³»çµ±**

### **æ ¸å¿ƒå•é¡Œ**

åœ¨ cerebrum_core ç­–ç•¥çš„å¯¦éš›é‹è¡Œä¸­ï¼Œç™¼ç¾å„å› å­çš„åŸå§‹æ•¸å€¼ç¯„åœå·®ç•°æ¥µå¤§ï¼Œå°è‡´æ¬Šé‡è¨­è¨ˆå¤±æ•ˆï¼š

```
å¯¦éš›è§€å¯Ÿçµæœï¼š
- F_trend: 0.01182 (å°æ•¸ç´šåˆ¥)
- F_sharpe: 7.72329 (å€‹ä½æ•¸ç´šåˆ¥)  
- F_stability: 31.80067 (åä½æ•¸ç´šåˆ¥)
- F_winrate: 0.46667 (å°æ•¸ç´šåˆ¥)

æ¬Šé‡ä¹˜ç©å¾Œï¼š
- F_trend Ã— 0.10 = 0.00118 (å¹¾ä¹æ²’æœ‰å½±éŸ¿)
- F_sharpe Ã— 0.40 = 3.08931 (ä¸­ç­‰å½±éŸ¿)
- F_stability Ã— 0.30 = 9.54020 (ä¸»å°åˆ†æ•¸)
- F_winrate Ã— 0.20 = 0.09333 (å¹¾ä¹æ²’æœ‰å½±éŸ¿)

ç¾ç‹€å•é¡Œï¼šF_stabilityä¸€å€‹å› å­å°±ä½”äº†åˆ†æ•¸çš„75%ï¼Œå®Œå…¨ä¸»å°äº†æ’åçµæœ
```

### **è§£æ±ºæ–¹æ¡ˆï¼šZ-Scoreæ¨™æº–åŒ–**

#### **æ¨™æº–åŒ–åŸç†**
```
å°æ–¼æ¯å€‹å› å­ï¼Œè¨ˆç®—æ‰€æœ‰äº¤æ˜“å°çš„ï¼š
1. å¹³å‡å€¼ (Î¼)
2. æ¨™æº–å·® (Ïƒ)  
3. Z-Score = (åŸå§‹å€¼ - Î¼) / Ïƒ

æ¨™æº–åŒ–å¾Œæ‰€æœ‰å› å­éƒ½åœ¨ç›¸åŒçš„é‡ç´šç¯„åœï¼š
- å¹³å‡å€¼ = 0
- æ¨™æº–å·® = 1
- å¤§éƒ¨åˆ†æ•¸å€¼åœ¨ [-3, +3] å€é–“å…§
```

#### **æ–°çš„è¨ˆç®—æµç¨‹**

**ç¬¬1éšæ®µï¼šå› å­åŸå§‹å€¼è¨ˆç®—**
```
å°æ¯å€‹äº¤æ˜“å°è¨ˆç®—4å€‹å› å­çš„åŸå§‹åˆ†æ•¸ï¼š
- F_trend_raw: [0.01182, -0.02345, 0.00567, ...]
- F_sharpe_raw: [7.72329, -116.20128, 15.34521, ...]
- F_stability_raw: [31.80067, 0.00000, 45.23191, ...]
- F_winrate_raw: [0.46667, 0.00000, 0.73333, ...]
```

**ç¬¬2éšæ®µï¼šZ-Scoreæ¨™æº–åŒ–**
```
è¨ˆç®—å„å› å­åœ¨æ‰€æœ‰äº¤æ˜“å°ä¸­çš„çµ±è¨ˆç‰¹å¾µï¼š
F_trend: Î¼ = 0.00423, Ïƒ = 0.01847
F_sharpe: Î¼ = -2.14523, Ïƒ = 24.57891  
F_stability: Î¼ = 18.45231, Ïƒ = 15.23456
F_winrate: Î¼ = 0.35421, Ïƒ = 0.28934

æ¨™æº–åŒ–çµæœï¼š
- F_trend_z = (0.01182 - 0.00423) / 0.01847 = 0.411
- F_sharpe_z = (7.72329 - (-2.14523)) / 24.57891 = 0.402
- F_stability_z = (31.80067 - 18.45231) / 15.23456 = 0.877
- F_winrate_z = (0.46667 - 0.35421) / 0.28934 = 0.389
```

**ç¬¬3éšæ®µï¼šæ¬Šé‡åŠ ç¸½**
```
ç¾åœ¨å„å› å­åœ¨ç›¸åŒé‡ç´šï¼Œæ¬Šé‡çœŸæ­£ç™¼æ®ä½œç”¨ï¼š
- F_trend_z Ã— 0.10 = 0.041
- F_sharpe_z Ã— 0.40 = 0.161
- F_stability_z Ã— 0.30 = 0.263
- F_winrate_z Ã— 0.20 = 0.078

æœ€çµ‚åˆ†æ•¸ = 0.041 + 0.161 + 0.263 + 0.078 = 0.543
```

### **æ–°çš„è¨ˆç®—è¨˜éŒ„æ ¼å¼**

#### **æ¨™æº–åŒ–å‰å¾Œå°æ¯”è¨˜éŒ„**
```
èˆŠæ ¼å¼ï¼ˆå•é¡Œï¼‰ï¼š
F_trend: 0.01182 Ã— 0.10 = 0.00118 | F_sharpe: 7.72329 Ã— 0.40 = 3.08931 | 
F_stability: 31.80067 Ã— 0.30 = 9.54020 | F_winrate: 0.46667 Ã— 0.20 = 0.09333 | 
Final: 0.00118 + 3.08931 + 9.54020 + 0.09333 = 12.72403

æ–°æ ¼å¼ï¼ˆæ”¹å–„ï¼‰ï¼š
F_trend: 0.01182â†’0.411 Ã— 0.10 = 0.041 | F_sharpe: 7.72329â†’0.402 Ã— 0.40 = 0.161 | 
F_stability: 31.80067â†’0.877 Ã— 0.30 = 0.263 | F_winrate: 0.46667â†’0.389 Ã— 0.20 = 0.078 | 
Final: 0.041 + 0.161 + 0.263 + 0.078 = 0.543
```

#### **æ–°è¨˜éŒ„åŒ…å«çš„ä¿¡æ¯**
1. **åŸå§‹å€¼**: ä¿ç•™åŸå§‹å› å­åˆ†æ•¸ï¼Œä¾›é©—è­‰ä½¿ç”¨
2. **æ¨™æº–åŒ–å€¼**: é¡¯ç¤ºZ-Scoreæ¨™æº–åŒ–å¾Œçš„çµæœ  
3. **æ¬Šé‡è¨ˆç®—**: æ¨™æº–åŒ–å€¼ä¹˜ä»¥æ¬Šé‡
4. **æœ€çµ‚åŠ ç¸½**: å„åŠ æ¬Šå€¼çš„ç¸½å’Œ

### **é æœŸæ•ˆæœ**

#### **æ’åçµæœæ”¹å–„**
```
æ¨™æº–åŒ–å‰ï¼ˆF_stabilityä¸»å°ï¼‰ï¼š
1. ADA_binance_bybit: 57.644 (ä¸»è¦ç”±F_stabilityè²¢ç»)
2. ETH_binance_bybit: 45.123 (ä¸»è¦ç”±F_stabilityè²¢ç»)
3. BTC_binance_bybit: 38.789 (ä¸»è¦ç”±F_stabilityè²¢ç»)

æ¨™æº–åŒ–å¾Œï¼ˆå„å› å­å¹³è¡¡ï¼‰ï¼š
1. XXX_binance_bybit: 1.245 (å››å€‹å› å­å‡è¡¡è²¢ç»)
2. YYY_binance_bybit: 0.987 (å››å€‹å› å­å‡è¡¡è²¢ç»)  
3. ZZZ_binance_bybit: 0.823 (å››å€‹å› å­å‡è¡¡è²¢ç»)
```

#### **æ¬Šé‡æ•ˆæœæ¢å¾©**
```
ç¾åœ¨å„å› å­çœŸæ­£æŒ‰ç…§è¨­è¨ˆæ¬Šé‡ç™¼æ®ä½œç”¨ï¼š
- è¶¨å‹¢å› å­ (10%): å½±éŸ¿æ’åçš„10%
- å¤æ™®å› å­ (40%): å½±éŸ¿æ’åçš„40% (æœ€é‡è¦)
- ç©©å®šæ€§å› å­ (30%): å½±éŸ¿æ’åçš„30%
- å‹ç‡å› å­ (20%): å½±éŸ¿æ’åçš„20%
```

### **æŠ€è¡“å¯¦ç¾è¦æ ¼**

#### **ç¨‹å¼ç¢¼ä¿®æ”¹ä½ç½®**
1. **factor_engine.py**: 
   - æ–°å¢ `_standardize_factors()` å‡½æ•¸
   - ä¿®æ”¹ `_calculate_final_score()` å‡½æ•¸ï¼Œå…ˆæ¨™æº–åŒ–å†åŠ æ¬Š
   - æ›´æ–°è¨ˆç®—è¨˜éŒ„æ ¼å¼

2. **factor_library.py**: 
   - æ–°å¢çµ±è¨ˆå‡½æ•¸ `calculate_mean_std()`
   - æ–°å¢æ¨™æº–åŒ–å‡½æ•¸ `apply_zscore()`

#### **å¯¦ç¾é‚è¼¯**
```python
def _standardize_factors(self, all_factor_scores):
    """å°æ‰€æœ‰äº¤æ˜“å°çš„å„å› å­é€²è¡ŒZ-Scoreæ¨™æº–åŒ–"""
    standardized_scores = {}
    factor_stats = {}
    
    # è¨ˆç®—å„å› å­çš„çµ±è¨ˆç‰¹å¾µ
    for factor_name in self.strategy_config['factors'].keys():
        values = [scores[factor_name] for scores in all_factor_scores.values()]
        mean_val = np.mean(values)
        std_val = np.std(values)
        factor_stats[factor_name] = {'mean': mean_val, 'std': std_val}
        
        # æ¨™æº–åŒ–å„äº¤æ˜“å°çš„è©²å› å­åˆ†æ•¸
        for trading_pair, scores in all_factor_scores.items():
            if trading_pair not in standardized_scores:
                standardized_scores[trading_pair] = {}
            raw_value = scores[factor_name]
            z_score = (raw_value - mean_val) / std_val if std_val != 0 else 0
            standardized_scores[trading_pair][factor_name] = {
                'raw': raw_value,
                'z_score': z_score
            }
    
    return standardized_scores, factor_stats
```

### **æ¥­å‹™åƒ¹å€¼æå‡**

#### **ç§‘å­¸æ€§æå‡**
- **çµ±è¨ˆå­¸åŸç†**: éµå¾ªZ-Scoreæ¨™æº–åŒ–çš„çµ±è¨ˆå­¸æœ€ä½³å¯¦è¸
- **å› å­å¹³è¡¡**: ç¢ºä¿å„å› å­åœ¨ç›¸åŒé‡ç´šä¸Šç«¶çˆ­
- **æ¬Šé‡æœ‰æ•ˆ**: è®“æ¬Šé‡è¨­è¨ˆçœŸæ­£ç™¼æ®é æœŸä½œç”¨

#### **çµæœå¯ä¿¡åº¦æå‡**
- **æ’ååˆç†**: ä¸å†è¢«å–®ä¸€å› å­ä¸»å°
- **ç­–ç•¥å¹³è¡¡**: å¤šç¶­åº¦è©•ä¼°çœŸæ­£ç”Ÿæ•ˆ
- **æŠ•è³‡é‚è¼¯**: ç¬¦åˆå¤šå› å­æ¨¡å‹çš„é‡‘èç†è«–

#### **ç³»çµ±å„ªåŒ–**
- **åƒæ•¸èª¿ç¯€**: æ¬Šé‡èª¿æ•´èƒ½ç”¢ç”Ÿé æœŸæ•ˆæœ
- **ç­–ç•¥æ“´å±•**: ç‚ºæ–°ç­–ç•¥å’Œæ–°å› å­æä¾›æ¨™æº–åŒ–æ¡†æ¶
- **ç•°å¸¸è™•ç†**: æ¨™æº–åŒ–å¾Œç•°å¸¸å€¼æ›´å®¹æ˜“è­˜åˆ¥

### **ç¬¬10æ­¥ï¼šåŸ·è¡Œå®Œæˆå ±å‘Š**
**ç³»çµ±æç¤º**:
```
âœ… cerebrum_core ç­–ç•¥åŸ·è¡Œå®Œæˆï¼
ğŸ“Š æˆåŠŸè¨ˆç®— 13 å€‹äº¤æ˜“å°
ğŸ“ˆ æœ€é«˜åˆ†ï¼š57.644 (ADA_binance_bybit)
ğŸ“‰ æœ€ä½åˆ†ï¼š-12.345 (XXX_binance_bybit)  
ğŸ“Š å¹³å‡åˆ†ï¼š25.123
ğŸ’¾ çµæœå·²ä¿å­˜åˆ° strategy_ranking è¡¨
â±ï¸ åŸ·è¡Œæ™‚é–“ï¼š2.3ç§’
```

## ğŸ’¡ **æ¥­å‹™åƒ¹å€¼**

### **å°ç”¨æˆ¶çš„åƒ¹å€¼**
1. **å®¢è§€è©•ä¼°**: åŸºæ–¼æ•¸å­¸æ¨¡å‹ï¼Œæ¸›å°‘ä¸»è§€åˆ¤æ–·
2. **å¤šç¶­åº¦åˆ†æ**: å¾è¶¨å‹¢ã€é¢¨éšªã€ç©©å®šæ€§ã€å‹ç‡å››å€‹è§’åº¦è©•ä¼°  
3. **å³æ™‚æ’å**: æä¾›å¯¦æ™‚çš„æŠ•è³‡æ¨™çš„æ’å
4. **æ­·å²è¿½è¹¤**: å¯æŸ¥çœ‹ç­–ç•¥çš„æ­·å²è¡¨ç¾

### **å°ç³»çµ±çš„åƒ¹å€¼**
1. **æ¨¡çµ„åŒ–è¨­è¨ˆ**: æ˜“æ–¼æ·»åŠ æ–°ç­–ç•¥å’Œæ–°å› å­
2. **é…ç½®é©…å‹•**: ç„¡éœ€æ”¹ç¨‹å¼ç¢¼å³å¯èª¿æ•´ç­–ç•¥
3. **å®Œæ•´é›†æˆ**: èˆ‡ç¾æœ‰ç³»çµ±ç„¡ç¸«æ•´åˆ
4. **æ€§èƒ½å„ªåŒ–**: é«˜æ•ˆçš„æ‰¹é‡è¨ˆç®—èƒ½åŠ›

## ğŸ¯ **ä¸€å¥è©±ç¸½çµ**

**ã€Œç¨‹å¼è®€é…ç½® â†’ æ’ˆ93å¤©è³‡æ–™ â†’ ç®—4å€‹åˆ†æ•¸ â†’ Z-Scoreæ¨™æº–åŒ– â†’ æŒ‰é‡è¦æ€§åŠ æ¬Š â†’ æ’å â†’ å­˜è³‡æ–™åº« + è¨˜éŒ„è¨ˆç®—éç¨‹ï¼Œå‘Šè¨´ä½ ç¾åœ¨æœ€å€¼å¾—æŠ•è³‡çš„å¹£æ˜¯å“ªäº›ï¼Œé‚„èƒ½é©—è­‰è¨ˆç®—æ˜¯å¦æ­£ç¢ºï¼Œå„å› å­æ¬Šé‡çœŸæ­£ç™¼æ®ä½œç”¨ã€**

å°±åƒè€å¸«æ”¹è€ƒå·ä¸€æ¨£ï¼šæ‹¿å­¸ç”Ÿçš„æˆç¸¾å–®ï¼ˆreturn_1dï¼‰ï¼ŒæŒ‰ç…§è©•åˆ†æ¨™æº–ï¼ˆ4å€‹å› å­ï¼‰ï¼Œçµ¦æ¯ç§‘æ‰“åˆ†æ•¸ï¼Œ**ä½†å…ˆæŠŠåˆ†æ•¸æ¨™æº–åŒ–è®“å„ç§‘åœ¨åŒä¸€èµ·è·‘ç·š**ï¼Œæœ€å¾ŒæŒ‰æ¬Šé‡ç®—ç¸½å¹³å‡ï¼Œæ’å‡ºç­ç´šåæ¬¡ï¼Œ**é‚„æœƒæŠŠè¨ˆç®—éç¨‹å¯«åœ¨è€ƒå·ä¸Šè®“å®¶é•·æª¢æŸ¥ï¼Œç¢ºä¿æ²’æœ‰å“ªä¸€ç§‘åˆ†æ•¸ç‰¹åˆ¥é«˜å°±ä¸»å°äº†ç¸½æˆç¸¾ï¼**

---

**æ–‡æª”ç‹€æ…‹**: âœ… v1.3 å·²å®Œæˆ (æ–°å¢æ™ºèƒ½æ—¥æœŸè™•ç†ç³»çµ± + è¨ˆç®—é©—è­‰ç³»çµ± + Z-Scoreæ¨™æº–åŒ–ç³»çµ±)  
**æœ€å¾Œæ›´æ–°**: 2025-01-22  
**å¯©æ ¸ç‹€æ…‹**: å¾…å¯©æ ¸  
**é‡å¤§æ›´æ–°**: 
- âœ… æ™ºèƒ½æ—¥æœŸåµæ¸¬åŠŸèƒ½ - åƒè€ƒ strategy_ranking.py è¨­è¨ˆ  
- âœ… è¨ˆç®—é©—è­‰ç³»çµ± - æ–°å¢ calculation æ¬„ä½è¨˜éŒ„è©³ç´°è¨ˆç®—éç¨‹
- âœ… Z-Scoreæ¨™æº–åŒ–ç³»çµ± - è§£æ±ºå› å­æ•¸å€¼ç¯„åœå·®ç•°å°è‡´æ¬Šé‡å¤±æ•ˆçš„å•é¡Œ 

## å¯¦æ–½ç‹€æ…‹ 

### âœ… é–‹ç™¼å®ŒæˆåŠŸèƒ½ (2025-01-04)

1. **âœ… æ™ºèƒ½æ—¥æœŸè™•ç†ç³»çµ±**
   - è‡ªå‹•åµæ¸¬å¯ç”¨æ—¥æœŸç¯„åœ: `2024-01-01` åˆ° `2024-06-22` (449å¤©)
   - æ”¯æ´5ç¨®åŸ·è¡Œæ¨¡å¼ (è‡ªå‹•ã€æŒ‡å®šæ—¥æœŸã€ç¯„åœã€å…¨é‡ã€æœ€æ–°)
   - æ‰¹é‡è™•ç†é€²åº¦é¡¯ç¤º: æ¯æ—¥å®Œæˆç«‹å³åé¥‹

2. **âœ… è¨ˆç®—é©—è­‰ç³»çµ±**  
   - è©³ç´°è¨ˆç®—è¨˜éŒ„: è¨˜éŒ„æ¯å€‹å› å­çš„ `åŸå§‹å€¼ Ã— æ¬Šé‡ = åŠ æ¬Šå€¼`
   - å››ç¨®é©—è­‰ç”¨é€”: åŸå§‹å€¼é©—è­‰ã€æ¬Šé‡æ‡‰ç”¨é©—è­‰ã€æœ€çµ‚æ±‚å’Œé©—è­‰ã€ç•°å¸¸æ’æŸ¥
   - ç•°å¸¸è™•ç†: æ­£ç¢ºè™•ç†é›¶å€¼ (0.00000) å’Œè² å€¼ (-46.49113) æƒ…æ³

3. **âœ… æ¸¬è©¦é©—è­‰çµæœ**
   - æˆåŠŸè™•ç† cerebrum_core ç­–ç•¥ 2024-06-01 æ—¥æœŸ
   - è¨ˆç®— 197 å€‹äº¤æ˜“å°ï¼Œç”Ÿæˆå®Œæ•´æ’å
   - è¨ˆç®—è¨˜éŒ„é•·åº¦: 206-209 å­—ç¬¦ï¼Œæ ¼å¼ä¸€è‡´
   - æ’åç¯„åœ: 12.72åˆ† (ETC_binance_bybit) åˆ° -46.49åˆ† (KDA_binance_bybit)

### âœ… åŠŸèƒ½é©—è­‰æ¸¬è©¦

#### æ¸¬è©¦æ¡ˆä¾‹1: æ­£å¸¸è¨ˆç®—è¨˜éŒ„
```
ETC_binance_bybit (æ’åç¬¬1): 
F_trend: 0.01182 Ã— 0.10 = 0.00118 | F_sharpe: 7.72329 Ã— 0.40 = 3.08931 | 
F_stability: 31.80067 Ã— 0.30 = 9.54020 | F_winrate: 0.46667 Ã— 0.20 = 0.09333 | 
Final: 0.00118 + 3.08931 + 9.54020 + 0.09333 = 12.72403
```

#### æ¸¬è©¦æ¡ˆä¾‹2: ç•°å¸¸æƒ…æ³è™•ç†
```
KDA_binance_bybit (æ’åç¬¬197):
F_trend: -0.10617 Ã— 0.10 = -0.01062 | F_sharpe: -116.20128 Ã— 0.40 = -46.48051 | 
F_stability: 0.00000 Ã— 0.30 = 0.00000 | F_winrate: 0.00000 Ã— 0.20 = 0.00000 | 
Final: -0.01062 + -46.48051 + 0.00000 + 0.00000 = -46.49113
```

### âœ… æŠ€è¡“å¯¦ç¾ç´°ç¯€

1. **è³‡æ–™åº«æ•´åˆ**: ä½¿ç”¨ç¾æœ‰ `strategy_ranking.final_combination_value` æ¬„ä½ä¿å­˜è¨ˆç®—è¨˜éŒ„
2. **å‘ä¸‹ç›¸å®¹**: é‡ç”¨ç¾æœ‰æ¬„ä½ï¼Œç„¡éœ€ä¿®æ”¹æ•¸æ“šåº«çµæ§‹ï¼Œä¸å½±éŸ¿æ—¢æœ‰åŠŸèƒ½
3. **æ€§èƒ½å„ªåŒ–**: æ‰¹é‡æ’å…¥ 197 æ¢è¨˜éŒ„ï¼Œè¨ˆç®—è¨˜éŒ„ä¸€ä½µä¿å­˜ï¼Œé«˜æ•ˆæ•¸æ“šåº«æ“ä½œ
4. **éŒ¯èª¤è™•ç†**: å®Œå–„çš„ NaNã€é›¶å€¼ã€è² å€¼è™•ç†æ©Ÿåˆ¶
5. **è¨ˆç®—é€æ˜**: æ¯å€‹æ’åéƒ½æœ‰å®Œæ•´çš„è¨ˆç®—è»Œè·¡ï¼Œæ”¯æ´å››ç¨®é©—è­‰ç”¨é€”

### ğŸ“‹ ä½¿ç”¨èªªæ˜

#### åŸºæœ¬åŸ·è¡Œ (è‡ªå‹•è™•ç†æ‰€æœ‰æ—¥æœŸ)
```bash
cd factor_strategies
python run_factor_strategies.py --strategy cerebrum_core --auto
```

#### æŒ‡å®šæ—¥æœŸåŸ·è¡Œ
```bash  
python run_factor_strategies.py --strategy cerebrum_core --date 2024-06-01
```

#### é©—è­‰è¨ˆç®—çµæœ
```sql
-- æŸ¥çœ‹å‰3åçš„è©³ç´°è¨ˆç®—éç¨‹
SELECT trading_pair, rank_position, final_ranking_score, final_combination_value 
FROM strategy_ranking 
WHERE strategy_name = 'cerebrum_core' AND date = '2024-06-01'
ORDER BY rank_position LIMIT 3;

-- å››ç¨®é©—è­‰ç”¨é€”çš„ SQL ç¯„ä¾‹

-- 1. å› å­åŸå§‹å€¼é©—è­‰
SELECT trading_pair,
       SUBSTR(final_combination_value, 
              INSTR(final_combination_value, 'F_trend: ') + 9,
              INSTR(final_combination_value, ' Ã—') - INSTR(final_combination_value, 'F_trend: ') - 9
       ) as trend_raw_value
FROM strategy_ranking 
WHERE strategy_name = 'cerebrum_core' AND date = '2024-06-01'
ORDER BY rank_position LIMIT 5;

-- 2. æ¬Šé‡æ‡‰ç”¨é©—è­‰
SELECT trading_pair,
       SUBSTR(final_combination_value, 
              INSTR(final_combination_value, 'F_sharpe: '),
              INSTR(final_combination_value, ' | F_stability') - INSTR(final_combination_value, 'F_sharpe: ')
       ) as sharpe_weight_calculation
FROM strategy_ranking 
WHERE strategy_name = 'cerebrum_core' AND date = '2024-06-01'
ORDER BY rank_position LIMIT 5;

-- 3. æœ€çµ‚æ±‚å’Œé©—è­‰
SELECT trading_pair, final_ranking_score,
       SUBSTR(final_combination_value, 
              INSTR(final_combination_value, 'Final: ') + 7
       ) as sum_verification
FROM strategy_ranking 
WHERE strategy_name = 'cerebrum_core' AND date = '2024-06-01'
ORDER BY rank_position LIMIT 5;

-- 4. ç•°å¸¸æ’æŸ¥
SELECT trading_pair, final_ranking_score,
       CASE 
           WHEN final_combination_value LIKE '%0.00000%' THEN 'åŒ…å«é›¶å€¼å› å­'
           WHEN final_combination_value LIKE '%-%' THEN 'åŒ…å«è² å€¼å› å­'
           ELSE 'æ­£å¸¸ç¯„åœ'
       END as anomaly_type,
       final_combination_value
FROM strategy_ranking 
WHERE strategy_name = 'cerebrum_core' AND date = '2024-06-01'
    AND (final_combination_value LIKE '%0.00000%' OR final_ranking_score < 0)
ORDER BY final_ranking_score;
```

### ğŸ¯ é–‹ç™¼ç¸½çµ

**è¨ˆç®—é©—è­‰ç³»çµ±é–‹ç™¼å®Œæˆï¼** 

- âœ… å¯¦ç¾äº†PRDä¸­è¨­è¨ˆçš„æ–¹æ¡ˆAäººé¡å¯è®€æ ¼å¼
- âœ… æ”¯æ´å››ç¨®é©—è­‰ç”¨é€”çš„SQLæŸ¥è©¢ç¯„ä¾‹
- âœ… å®Œæ•´çš„ç•°å¸¸æƒ…æ³è™•ç†å’Œæ¸¬è©¦é©—è­‰
- âœ… é«˜æ•ˆçš„æ‰¹é‡è™•ç†å’Œè³‡æ–™åº«æ•´åˆ
- âœ… è©³ç´°çš„ä½¿ç”¨æ–‡æª”å’Œç¯„ä¾‹ä»£ç¢¼

ç³»çµ±ç¾å·²å…·å‚™å®Œæ•´çš„è¨ˆç®—é€æ˜åº¦å’Œå¯é©—è­‰æ€§ï¼Œæ»¿è¶³æ‰€æœ‰PRDéœ€æ±‚ã€‚

### âœ… å®ŒæˆåŠŸèƒ½ (v1.3) - Z-Scoreæ¨™æº–åŒ–ç³»çµ±

**Z-Scoreæ¨™æº–åŒ–ç³»çµ±**
- **é–‹ç™¼ç‹€æ…‹**: âœ… é–‹ç™¼å®Œæˆï¼Œå·²æŠ•å…¥ä½¿ç”¨
- **æ ¸å¿ƒå•é¡Œ**: å„å› å­æ•¸å€¼ç¯„åœå·®ç•°æ¥µå¤§ï¼Œæ¬Šé‡è¨­è¨ˆå¤±æ•ˆ
- **è§£æ±ºæ–¹æ¡ˆ**: å¯¦æ–½Z-Scoreæ¨™æº–åŒ–ï¼Œè®“å„å› å­åœ¨ç›¸åŒé‡ç´šç«¶çˆ­
- **æŠ€è¡“å¯¦ç¾**: 
  - âœ… æ–°å¢ `standardize_factor_scores()` å‡½æ•¸ (factor_library.py)
  - âœ… æ–°å¢ `_calculate_final_score_with_standardization()` å‡½æ•¸ (factor_engine.py)
  - âœ… ä¿®æ”¹è¨ˆç®—è¨˜éŒ„æ ¼å¼ï¼Œé¡¯ç¤ºã€ŒåŸå§‹å€¼â†’æ¨™æº–åŒ–å€¼ Ã— æ¬Šé‡ = åŠ æ¬Šå€¼ã€
  - âœ… ä¸‰éšæ®µè¨ˆç®—æµç¨‹ï¼šåŸå§‹è¨ˆç®—â†’æ¨™æº–åŒ–â†’åŠ æ¬Šæ±‚å’Œ
- **å¯¦éš›æ•ˆæœ**: 
  - âœ… æ’åä¸å†è¢«å–®ä¸€å› å­ä¸»å° (F_stabilityå¾75%å½±éŸ¿åŠ›é™è‡³åˆç†ç¯„åœ)
  - âœ… å„å› å­æŒ‰è¨­è¨ˆæ¬Šé‡ç™¼æ®å½±éŸ¿åŠ› (40%ã€30%ã€20%ã€10%)
  - âœ… æå‡ç­–ç•¥ç§‘å­¸æ€§å’Œå¯ä¿¡åº¦
  - âœ… æœ€çµ‚åˆ†æ•¸å¾12-57åˆ†ç¯„åœæ”¹å–„è‡³1-2åˆ†ç¯„åœ

**é–‹ç™¼å®Œæˆ**:
- âœ… **Phase 1**: å¯¦ç¾æ¨™æº–åŒ–å‡½æ•¸å’Œçµ±è¨ˆè¨ˆç®—
- âœ… **Phase 2**: ä¿®æ”¹è¨ˆç®—è¨˜éŒ„æ ¼å¼ï¼Œæ”¯æ´æ–°çš„é¡¯ç¤ºæ–¹å¼
- âœ… **Phase 3**: æ¸¬è©¦é©—è­‰æ¨™æº–åŒ–æ•ˆæœï¼Œå°æ¯”æ¨™æº–åŒ–å‰å¾Œæ’åå·®ç•°
- âœ… **Phase 4**: æ›´æ–°æ–‡æª”å’Œä½¿ç”¨ç¯„ä¾‹

**æ¸¬è©¦é©—è­‰çµæœ**:
```
æ¸¬è©¦æ¡ˆä¾‹: cerebrum_core ç­–ç•¥ 2024-06-01 (197å€‹äº¤æ˜“å°)

æ¨™æº–åŒ–çµ±è¨ˆ:
- F_stability: Î¼=3.78133, Ïƒ=8.39243
- F_sharpe: Î¼=-6.27965, Ïƒ=12.86792  
- F_winrate: Î¼=0.22893, Ïƒ=0.16457
- F_trend: Î¼=-0.02498, Ïƒ=0.12197

å‰3åè¨ˆç®—è¨˜éŒ„:
1. WLD_binance_bybit (1.853):
   F_trend: 0.07394â†’0.811 Ã— 0.10 = 0.08110
   F_sharpe: 17.65541â†’1.860 Ã— 0.40 = 0.74402
   F_stability: 13.69889â†’1.182 Ã— 0.30 = 0.35452
   F_winrate: 0.78333â†’3.369 Ã— 0.20 = 0.67375
   Final: 0.08110 + 0.74402 + 0.35452 + 0.67375 = 1.85339

2. ETC_binance_bybit (1.756):
   F_trend: 0.01182â†’0.302 Ã— 0.10 = 0.03017
   F_sharpe: 7.72329â†’1.088 Ã— 0.40 = 0.43528
   F_stability: 31.80067â†’3.339 Ã— 0.30 = 1.00159
   F_winrate: 0.46667â†’1.445 Ã— 0.20 = 0.28891
   Final: 0.03017 + 0.43528 + 1.00159 + 0.28891 = 1.75596

æ¬Šé‡æ•ˆæœé©—è­‰:
- F_sharpe (40%): å¯¦éš›å½±éŸ¿40.2% âœ…
- F_stability (30%): å¯¦éš›å½±éŸ¿19.1% âœ…  
- F_winrate (20%): å¯¦éš›å½±éŸ¿36.4% âœ…
- F_trend (10%): å¯¦éš›å½±éŸ¿4.4% âœ…
```